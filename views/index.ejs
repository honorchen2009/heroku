<!DOCTYPE html>
<html lang="en">

<%- include('layouts/header');-%>

<body>

  <!-- Navigation -->
  <%- include('layouts/navbar');-%>

  <!-- Page Header -->
  <header class="masthead" style="background-image: url('img/elec.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="site-heading"  style="color:white;" >
            <h1>Power Data</h1>
          </div>
        </div>
      </div>
    </div>    
  </header>

  <canvas id="canvas"class="container" ></canvas>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.js"></script>
  <script>
    var lineChartData = {
    labels: ["New", "1st", "2nd", "3th", "4th", "5th"], //顯示區間名稱
    datasets: [{
        label: '功率', // tootip 出現的名稱
        lineTension: 0, // 曲線的彎度，設0 表示直線
        backgroundColor: "#ea464d",
        borderColor: "#ea464d",
        borderWidth: 5,
        data: [10, 12, 33, 60, 130], // 資料
        fill: false, // 是否填滿色彩
    }, {
        label: '電壓',
        lineTension: 0,
        fill: false,
        backgroundColor: "#29b288",
        borderColor: "#29b288",
        borderWidth: 5,
        data: [12, 20, 60, 80, 200],
    },]
};
function drawLineCanvas(ctx,data) {
    window.myLine = new Chart(ctx, {  //先建立一個 chart
        type: 'line', // 型態
        data: data,
        options: {
                responsive: true,
                legend: { //是否要顯示圖示
                    display: true,
                },
                tooltips: { //是否要顯示 tooltip
                    enabled: true
                },
                scales: {  //是否要顯示 x、y 軸
                    xAxes: [{
                        display: true
                    }],
                    yAxes: [{
                        display: true
                    }]
                },
            }
    });
};
window.onload = function () {
    var ctx = document.getElementById("canvas").getContext("2d");
    drawLineCanvas(ctx,lineChartData);
};
  </script>

  <table class="container" style="background-color: rgb(207, 229, 252);border: 3px solid #6aafc2;border-collapse:collapse;text-align: center;" >
    <% if (oneminPowerPosts.length>1) {%>
    <tr>
      <td style="border: 2px solid #008866;"></td>
      <td style="border: 2px solid #008866;">New update</td>
      <td style="border: 2px solid #008866;">1st record</td>
      <td style="border: 2px solid #008866;">2nd record</td>
      <!-- <td style="border: 2px solid #008866;font-family:fantasy ;">3th record</td> -->
      <!--td style="border: 2px solid #008866;font-family:fantasy ;">4th record</td> -->
    </tr>  
    <tr>
      <td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;">Watt</td>
      <td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;"><%var watt = JSON.parse(wattarray)%><%=watt[watt.length-1]%> kW</td>
      <td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;"><%var watt = JSON.parse(wattarray)%><%=watt[watt.length-2]%> kW</td>
      <td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;"><%var watt = JSON.parse(wattarray)%><%=watt[watt.length-3]%> kW</td>
      <!-- <td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;font-family:fantasy ;"><%var watt = JSON.parse(wattarray)%><%=watt[watt.length-4]%> kW</td> -->
      <!-- td id="Watt-Text" style="color:rgb(255, 145, 2);border: 2px solid #008866;font-family:fantasy ;"><%var watt = JSON.parse(wattarray)%><%=watt[watt.length-5]%> kW</td> -->
    </tr>
    <tr>
      <td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;">Voltage</td>
      <td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;"><%=oneminPowerPosts[oneminPowerPosts.length-1].電壓%> v</td>
      <td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;"><%=oneminPowerPosts[oneminPowerPosts.length-2].電壓%> v</td>
      <td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;"><%=oneminPowerPosts[oneminPowerPosts.length-3].電壓%> v</td>
      <!-- <td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;font-family:fantasy ;"><%=oneminPowerPosts[oneminPowerPosts.length-4].電壓%> v</td> -->
      <!-- td id="voltage-Text" style="color:rgba(47, 236, 0, 0.67);border: 2px solid #008866;font-family:fantasy ;"><%=oneminPowerPosts[oneminPowerPosts.length-5].電壓%> v</td> -->
    </tr>
    <tr>
      <td id="Time-Value" style="border: 2px solid #008866;">Date</td>
      <td id="Time-Value" style="border: 2px solid #008866;"><%var date = JSON.parse(datearray)%><%=date[date.length-1]%></td>
      <td id="Time-Value" style="border: 2px solid #008866;"><%var date = JSON.parse(datearray)%><%=date[date.length-2]%></td>
      <td id="Time-Value" style="border: 2px solid #008866;"><%var date = JSON.parse(datearray)%><%=date[date.length-3]%></td>
      <!-- <td id="Time-Value" style="border: 2px solid #008866;font-family:fantasy ;"><%var date = JSON.parse(datearray)%><%=date[date.length-4]%></td> -->
      <!-- td id="Time-Value" style="border: 2px solid #008866;font-family:fantasy ;"><%var date = JSON.parse(datearray)%><%=date[date.length-5]%></td> -->
    </tr>
    <% } %>
  </table>
  <!-- Main Content -->
  <!-- <div class="container" style="text-align: left;" >
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto" >
          <% if (oneminPowerPosts.length>1) {%>
            <div>
                <h3 id="Watt-Text" style="color:purple;">1st Watt : <%var watt = JSON.parse(wattarray)%><%=watt[watt.length-1]%> kW  2nd Watt : <%var watt = JSON.parse(wattarray)%><%=watt[watt.length-2]%> kW</h3>

            </div>
            <div>
                <h3 id="voltage-Text" style="color:rgb(56, 255, 6);">Voltage : <%=oneminPowerPosts[oneminPowerPosts.length-1].電壓%> v</h3>
            </div>
            <div>
                <h3 id="Time-Value"><%var date = JSON.parse(datearray)%><%=date[date.length-1]%></h3>
            </div>
            <% } %> -->
        <!-- Pager -->
        <!-- <div class="clearfix"> -->
          <!--a class="btn btn-primary float-right" href="#">Older Posts &rarr;</a-->
        <!-- </div>
      </div>
    </div>
  </div> -->

  <!-- <style>
    #Watt-Text1{
      float: right;
    }

  </style> -->

  <!-- <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto" >
          <% if (oneminPowerPosts.length>1) {%>
            <div>
                <h3 id="Watt-Text1" style="color:purple;" >Watt : <%var watt = JSON.parse(wattarray)%><%=watt[watt.length-2]%> kW </h3>
            </div>
            <div>
                <h3 id="voltage-Text1" style="color:rgb(56, 255, 6);">Voltage : <%=oneminPowerPosts[oneminPowerPosts.length-2].電壓%> v</h3>
            </div>
            <div>
                <h3 id="Time-Value1"><%var date = JSON.parse(datearray)%><%=date[date.length-2]%></h3>
            </div>
            <% } %> -->
        <!-- Pager -->
        <!-- <div class="clearfix"> -->
          <!--a class="btn btn-primary float-right" href="#">Older Posts &rarr;</a-->
        <!-- </div>
      </div>
    </div>
  </div> -->

  

  <%- include('layouts/footer');-%>

  <%- include('layouts/scripts');-%>

  <script language="JavaScript">
    function myrefresh()
    {
    window.location.reload();
    }
    setTimeout('myrefresh()',30000); //指定30秒刷新一次
    </script>


</body>

</html>